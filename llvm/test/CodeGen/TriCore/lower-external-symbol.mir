# RUN: llc -mtriple=tricore -global-isel -start-after=instruction-select -verify-machineinstrs -show-mc-encoding %s -o - | FileCheck %s


# CHECK-LABEL:  .text
# CHECK:        .file   "lower-external-symbol.mir"
# CHECK:        .globl  test_call               # -- Begin function test_call
# CHECK:        .type   test_call,@function
# CHECK-LABEL:  test_call:                              # @test_call
# CHECK:        .cfi_startproc
# CHECK:        # %bb.0:
# CHECK:        mov.aa  %a14, %a10              # encoding: [0x01,0xa0,0x00,0xe0]
# CHECK:        call    foo                     # encoding: [0x6d,A,A,A]
# CHECK-NEXT:                                   #   fixup A - offset: 0, value: foo, kind: fixup_24rel
# CHECK:        ret                             # encoding: [0x0d,0x00,0x80,0x01]
# CHECK-LABEL:.Lfunc_end0:
# CHECK:        .size   test_call, .Lfunc_end0-test_call
# CHECK:        .cfi_endproc
# CHECK:                                        # -- End function
# CHECK:        .section        ".note.GNU-stack","",@progbits

---
name:            test_call
alignment:       1
legalized:       true
regBankSelected: true
selected:        true
tracksRegLiveness: true
liveins:         []
body:             |
  bb.0:
    CALL &foo, csr_tricore_uppercontext, implicit-def $a11, implicit $psw
    RET implicit $a11
...
